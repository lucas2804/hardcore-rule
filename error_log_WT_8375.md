[~plarochelle] this would not send email anytime there is no user_id correct?

{code}
2016-01-14 12:32:21 INFO (session: f432151b5afa937c2e79d9aeca513255) method /api/v1_1/emails (user: not logged in) params: {"authenticity_token"=>"IYl9BdP0ZuqS8Ag6iofg0mJqmos695FZHBG+lnk2Z6s=", "emails"=>{"user_id"=>"", "resource_id"=>"94759", "resource_type"=>"Ebook::Ebook", "locale"=>"en_GB", "link"=>"http://www.blurb.co.uk/ebooks/94759-the-whitehead-legacy", "to"=>"anyehc@sjhsvs.com", "from_email"=>"anyehc@sjhsvs.com", "message"=>"V0doJJ  <a href=\"http://kchaoaiyxsyq.com/\">kchaoaiyxsyq</a>, [url=http://mtcdysrtedpj.com/]mtcdysrtedpj[/url], [link=http://yqtfphtfedlj.com/]yqtfphtfedlj[/link], http://aempkkvdsihy.com/"}, "commit"=>"Send", "controller"=>"api/emails", "action"=>"create", "apiversion"=>"v1_1"}
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: ""
LINE 1: SELECT * FROM "users" WHERE ("users"."id" = '') AND (users.d...
                                                    ^
: SELECT * FROM "users" WHERE ("users"."id" = '') AND (users.deleted_at IS NULL)  LIMIT 1):
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:227:in `rescue in log'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:204:in `log'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/active_record.rb:55:in `block in log_with_newrelic_instrumentation'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/method_tracer.rb:69:in `block in trace_execution_scoped'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/method_tracer_helpers.rb:82:in `trace_execution_scoped'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/method_tracer.rb:67:in `trace_execution_scoped'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/active_record.rb:52:in `log_with_newrelic_instrumentation'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:520:in `execute'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:1002:in `select_raw'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb:989:in `select'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:60:in `block in select_all_with_query_cache'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:81:in `cache_sql'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:60:in `select_all_with_query_cache'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/base.rb:666:in `find_by_sql'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/base.rb:1583:in `find_every'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/base.rb:2187:in `with_scope'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/base.rb:1540:in `find_initial'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/base.rb:618:in `find'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/base.rb:1919:in `find_by_id'
  app/controllers/api/emails_controller.rb:12:in `create'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/base.rb:1333:in `perform_action'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/filters.rb:617:in `call_filters'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/filters.rb:638:in `block in run_before_filters'
  config/initializers/cacheable_flash.rb:8:in `write_flash_to_cookie'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activesupport/lib/active_support/callbacks.rb:178:in `evaluate_method'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/filters.rb:186:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/filters.rb:635:in `run_before_filters'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/filters.rb:615:in `call_filters'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/filters.rb:610:in `perform_action_with_filters'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/benchmarking.rb:92:in `perform_action_with_benchmark'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/rescue.rb:160:in `perform_action_with_rescue'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/flash.rb:151:in `perform_action_with_flash'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/rails/action_controller.rb:101:in `block in perform_action_with_newrelic_trace_wrapper'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:353:in `perform_action_with_newrelic_trace'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/rails/action_controller.rb:101:in `perform_action_with_newrelic_trace_wrapper'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/base.rb:532:in `process'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/filters.rb:606:in `process_with_filters'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/compass-rails-1.0.3/lib/compass-rails/railties/2_3.rb:9:in `process_with_compass'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/base.rb:391:in `process'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/base.rb:386:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/routing/route_set.rb:438:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/dispatcher.rb:87:in `dispatch'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/dispatcher.rb:121:in `_call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/dispatcher.rb:130:in `block in build_middleware_stack'
  barista (1.3.0) lib/barista/server.rb:33:in `call'
  barista (1.3.0) lib/barista/server.rb:33:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/rack/agent_hooks.rb:30:in `traced_call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/middleware_tracing.rb:67:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/rack/browser_monitoring.rb:23:in `traced_call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/middleware_tracing.rb:67:in `call'
  sass (3.2.19) lib/sass/plugin/rack.rb:54:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/string_coercion.rb:25:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/params_parser.rb:15:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/session/abstract_store.rb:177:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/query_cache.rb:29:in `block in call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/query_cache.rb:9:in `cache'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/query_cache.rb:28:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
  app/middleware/flash_session_cookie_middleware.rb:14:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/failsafe.rb:26:in `call'
  <internal:prelude>:10:in `synchronize'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/actionpack/lib/action_controller/dispatcher.rb:106:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/middleware_tracing.rb:67:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/railties/lib/rails/rack/static.rb:31:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/middleware_tracing.rb:67:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/bundler/gems/rails-43b134652d66/railties/lib/rails/rack/log_tailer.rb:17:in `call'
  /data/apps/blurby/shared/bundle/ruby/1.9.1/gems/newrelic_rpm-3.11.2.286/lib/new_relic/agent/instrumentation/middleware_tracing.rb:67:in `call'
  /data/rbenv/.rbenv/versions/1.9.3-p550/lib/ruby/gems/1.9.1/gems/passenger-4.0.42/lib/phusion_passenger/rack/thread_handler_extension.rb:74:in `process_request'
  /data/rbenv/.rbenv/versions/1.9.3-p550/lib/ruby/gems/1.9.1/gems/passenger-4.0.42/lib/phusion_passenger/request_handler/thread_handler.rb:141:in `accept_and_process_next_request'
  /data/rbenv/.rbenv/versions/1.9.3-p550/lib/ruby/gems/1.9.1/gems/passenger-4.0.42/lib/phusion_passenger/request_handler/thread_handler.rb:109:in `main_loop'
  /data/rbenv/.rbenv/versions/1.9.3-p550/lib/ruby/gems/1.9.1/gems/passenger-4.0.42/lib/phusion_passenger/request_handler.rb:448:in `block (3 levels) in start_threads'
{code}